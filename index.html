<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Cedar â€” TEIM Assistant | Tribal Economic Impact Platform</title>

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Crimson+Text:wght@400;600&family=DM+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">

<style>
:root {
  --ochre: #cc7722;
  --sage: #87a96b;
  --stone: #6b5b73;
  --earth: #3e2723;
  --cream: #f7f3e9;
  --cream-dark: #ebe5d8;
  --charcoal: #2e2e2e;
  --territory: #059669;
  --territory-soft: rgba(5, 150, 105, 0.08);
  --territory-glow: rgba(5, 150, 105, 0.15);
  --white: #fdfaf5;
  --font-display: 'Crimson Text', Georgia, serif;
  --font-body: 'DM Sans', system-ui, sans-serif;
  --ease: cubic-bezier(.4, 0, .2, 1);
  --shadow-soft: 0 4px 20px rgba(62, 39, 35, 0.08);
  --shadow-card: 0 2px 12px rgba(62, 39, 35, 0.06);
}

*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

body {
  font-family: var(--font-body);
  line-height: 1.65;
  color: var(--earth);
  background: var(--cream);
  min-height: 100vh;
}

/* NAV */
nav {
  position: sticky; top: 0; z-index: 100;
  background: rgba(253, 250, 245, 0.97);
  backdrop-filter: blur(12px);
  border-bottom: 1px solid rgba(229, 221, 207, 0.6);
  padding: 0.8rem 1.4rem;
  display: flex; align-items: center; justify-content: space-between;
}

.brand {
  font-size: 0.78rem; font-weight: 700;
  letter-spacing: 0.06em; text-transform: uppercase;
  color: var(--earth); text-decoration: none; line-height: 1.3;
}
.brand span {
  display: block; font-size: 0.6rem;
  color: var(--territory); font-weight: 700; letter-spacing: 0.08em;
}

.nav-links { display: flex; align-items: center; gap: 0.25rem; }
.nav-links a {
  padding: 0.5rem 0.85rem; font-size: 0.8rem;
  font-weight: 600; color: var(--stone);
  text-decoration: none; border-radius: 8px;
  transition: all 0.24s var(--ease);
}
.nav-links a:hover { background: rgba(135, 169, 107, 0.12); }
.nav-links a.active {
  background: linear-gradient(135deg, var(--territory-soft), rgba(135, 169, 107, 0.12));
  color: var(--territory);
  box-shadow: inset 0 0 0 1px rgba(5, 150, 105, 0.2);
}

/* PAGE LAYOUT */
.page-wrap {
  max-width: 1400px;
  margin: 0 auto;
  padding: 1.5rem 1.4rem 2rem;
}

.page-header {
  display: flex; align-items: flex-start; justify-content: space-between;
  gap: 1rem; margin-bottom: 1.25rem; flex-wrap: wrap;
}

.page-title-block h1 {
  font-family: var(--font-display);
  font-size: 1.85rem; line-height: 1.2;
  color: var(--earth); margin-bottom: 0.25rem;
}

.page-subtitle {
  font-size: 0.88rem; color: var(--stone); max-width: 520px;
}

.prototype-badge {
  display: inline-flex; align-items: center; gap: 0.4rem;
  background: linear-gradient(135deg, var(--stone), var(--territory));
  color: #fff; padding: 0.4rem 0.85rem; border-radius: 999px;
  font-size: 0.65rem; font-weight: 600; letter-spacing: 0.06em;
  box-shadow: 0 2px 10px rgba(5, 150, 105, 0.25);
}

.prototype-badge::before {
  content: '';
  width: 6px; height: 6px; border-radius: 50%;
  background: #a7f3d0;
  box-shadow: 0 0 0 2px rgba(167, 243, 208, 0.3);
}

/* CHAT CONTAINER */
.chat-container {
  display: grid;
  grid-template-columns: 280px 1fr;
  gap: 1.25rem;
  min-height: 580px;
}

@media (max-width: 900px) {
  .chat-container {
    grid-template-columns: 1fr;
  }
}

/* SIDEBAR */
.sidebar {
  display: flex; flex-direction: column; gap: 1rem;
}

.cedar-profile {
  background: var(--white);
  border: 1px solid rgba(229, 221, 207, 0.8);
  border-radius: 14px;
  padding: 1.1rem;
  box-shadow: var(--shadow-card);
}

.cedar-avatar-row {
  display: flex; align-items: center; gap: 0.75rem;
  margin-bottom: 0.65rem;
}

.cedar-avatar {
  width: 44px; height: 44px;
  border-radius: 12px;
  background: linear-gradient(145deg, var(--territory), var(--sage));
  display: flex; align-items: center; justify-content: center;
  color: #fff; font-weight: 700; font-size: 0.9rem;
  letter-spacing: 0.03em;
  box-shadow: 0 4px 14px rgba(5, 150, 105, 0.3);
  position: relative;
}

.cedar-avatar::after {
  content: '';
  position: absolute; bottom: -2px; right: -2px;
  width: 12px; height: 12px; border-radius: 50%;
  background: #10b981;
  border: 2px solid var(--white);
}

.cedar-name {
  font-weight: 700; font-size: 0.95rem; color: var(--earth);
}

.cedar-role {
  font-size: 0.72rem; color: var(--stone);
}

.cedar-desc {
  font-size: 0.78rem; color: var(--charcoal);
  line-height: 1.5;
}

.cedar-badges {
  display: flex; gap: 0.4rem; flex-wrap: wrap;
  margin-top: 0.6rem;
}

.cedar-badge {
  font-size: 0.62rem; text-transform: uppercase;
  letter-spacing: 0.07em; font-weight: 600;
  padding: 0.3rem 0.55rem; border-radius: 999px;
  background: var(--territory-soft);
  color: var(--territory);
  border: 1px solid rgba(5, 150, 105, 0.2);
}

/* Topic Cards */
.topics-section {
  flex: 1;
}

.topics-label {
  font-size: 0.68rem; text-transform: uppercase;
  letter-spacing: 0.1em; color: var(--stone);
  margin-bottom: 0.5rem; font-weight: 600;
}

.topic-cards {
  display: flex; flex-direction: column; gap: 0.5rem;
}

.topic-card {
  background: var(--white);
  border: 1px solid rgba(229, 221, 207, 0.8);
  border-radius: 10px;
  padding: 0.75rem 0.85rem;
  cursor: pointer;
  transition: all 0.2s var(--ease);
  position: relative;
  overflow: hidden;
}

.topic-card::before {
  content: '';
  position: absolute; left: 0; top: 0; bottom: 0;
  width: 3px; background: var(--ochre);
  opacity: 0; transition: opacity 0.2s;
}

.topic-card:hover {
  border-color: rgba(204, 119, 34, 0.4);
  box-shadow: var(--shadow-soft);
  transform: translateX(2px);
}

.topic-card:hover::before { opacity: 1; }

.topic-card-title {
  font-size: 0.8rem; font-weight: 600;
  color: var(--earth); margin-bottom: 0.15rem;
}

.topic-card-sub {
  font-size: 0.7rem; color: var(--stone);
}

/* MAIN CHAT PANEL */
.chat-main {
  background: var(--white);
  border: 1px solid rgba(229, 221, 207, 0.8);
  border-radius: 16px;
  display: flex; flex-direction: column;
  box-shadow: var(--shadow-soft);
  overflow: hidden;
}

/* Chat Header */
.chat-header {
  padding: 0.85rem 1.1rem;
  border-bottom: 1px solid rgba(229, 221, 207, 0.6);
  display: flex; align-items: center; justify-content: space-between;
  background: linear-gradient(180deg, var(--white), var(--cream));
}

.chat-header-left {
  display: flex; align-items: center; gap: 0.6rem;
}

.chat-mode-indicator {
  display: flex; align-items: center; gap: 0.35rem;
  font-size: 0.72rem; color: var(--territory); font-weight: 600;
}

.chat-mode-indicator::before {
  content: '';
  width: 7px; height: 7px; border-radius: 50%;
  background: var(--territory);
  box-shadow: 0 0 0 3px var(--territory-glow);
}

.chat-session-label {
  font-size: 0.72rem; color: var(--stone);
  padding: 0.3rem 0.6rem;
  border: 1px dashed rgba(107, 91, 115, 0.4);
  border-radius: 999px;
}

.chat-actions {
  display: flex; gap: 0.4rem;
}

.chat-action-btn {
  padding: 0.4rem 0.65rem;
  font-size: 0.68rem; font-weight: 600;
  color: var(--stone);
  background: transparent;
  border: 1px solid rgba(229, 221, 207, 0.8);
  border-radius: 6px;
  cursor: pointer;
  transition: all 0.15s var(--ease);
}

.chat-action-btn:hover {
  background: var(--cream);
  border-color: var(--ochre);
  color: var(--ochre);
}

/* Chat Body */
.chat-body {
  flex: 1;
  padding: 1rem 1.1rem;
  overflow-y: auto;
  display: flex; flex-direction: column; gap: 0.85rem;
  background: 
    radial-gradient(circle at 10% 90%, var(--territory-glow) 0%, transparent 50%),
    radial-gradient(circle at 90% 10%, rgba(204, 119, 34, 0.06) 0%, transparent 50%),
    var(--cream);
}

.chat-body::-webkit-scrollbar { width: 6px; }
.chat-body::-webkit-scrollbar-track { background: transparent; }
.chat-body::-webkit-scrollbar-thumb {
  background: rgba(107, 91, 115, 0.25);
  border-radius: 999px;
}

/* Chat Intro */
.chat-intro {
  text-align: center;
  padding: 1.5rem 1rem;
  max-width: 400px;
  margin: 0 auto;
}

.chat-intro-icon {
  width: 48px; height: 48px;
  margin: 0 auto 0.75rem;
  border-radius: 14px;
  background: linear-gradient(145deg, var(--territory), var(--sage));
  display: flex; align-items: center; justify-content: center;
  box-shadow: 0 6px 20px rgba(5, 150, 105, 0.25);
}

.chat-intro-icon svg {
  width: 24px; height: 24px; color: #fff;
}

.chat-intro h3 {
  font-family: var(--font-display);
  font-size: 1.15rem; color: var(--earth);
  margin-bottom: 0.35rem;
}

.chat-intro p {
  font-size: 0.8rem; color: var(--stone);
  line-height: 1.5;
}

/* Messages */
.message-row {
  display: flex; gap: 0.6rem;
  animation: fadeSlideIn 0.3s var(--ease);
}

@keyframes fadeSlideIn {
  from { opacity: 0; transform: translateY(8px); }
  to { opacity: 1; transform: translateY(0); }
}

.message-row.user { justify-content: flex-end; }

.message-avatar {
  width: 28px; height: 28px;
  border-radius: 8px;
  background: linear-gradient(145deg, var(--territory), var(--sage));
  display: flex; align-items: center; justify-content: center;
  color: #fff; font-size: 0.6rem; font-weight: 700;
  flex-shrink: 0;
}

.message-row.user .message-avatar {
  background: linear-gradient(145deg, var(--stone), var(--ochre));
  order: 2;
}

.message-content {
  max-width: 70%;
  display: flex; flex-direction: column; gap: 0.2rem;
}

.message-bubble {
  padding: 0.7rem 0.9rem;
  border-radius: 12px;
  font-size: 0.84rem;
  line-height: 1.55;
  white-space: pre-wrap;
}

.message-row.bot .message-bubble {
  background: var(--white);
  border: 1px solid rgba(229, 221, 207, 0.8);
  border-bottom-left-radius: 4px;
  color: var(--charcoal);
}

.message-row.user .message-bubble {
  background: linear-gradient(135deg, var(--territory), #047857);
  color: #fff;
  border-bottom-right-radius: 4px;
  box-shadow: 0 4px 12px rgba(5, 150, 105, 0.25);
}

.message-meta {
  font-size: 0.65rem;
  color: var(--stone);
  padding: 0 0.2rem;
}

.message-row.user .message-meta { text-align: right; }

/* Typing Indicator */
.typing-indicator {
  display: flex; align-items: center; gap: 0.4rem;
  padding: 0.6rem 0.8rem;
  background: var(--white);
  border: 1px solid rgba(229, 221, 207, 0.8);
  border-radius: 12px;
  width: fit-content;
}

.typing-dots {
  display: flex; gap: 3px;
}

.typing-dots span {
  width: 6px; height: 6px;
  border-radius: 50%;
  background: var(--territory);
  animation: typingBounce 1.2s infinite;
}

.typing-dots span:nth-child(2) { animation-delay: 0.15s; }
.typing-dots span:nth-child(3) { animation-delay: 0.3s; }

@keyframes typingBounce {
  0%, 60%, 100% { transform: translateY(0); opacity: 0.4; }
  30% { transform: translateY(-4px); opacity: 1; }
}

.typing-text {
  font-size: 0.72rem; color: var(--stone); font-style: italic;
}

/* CHAT INPUT */
.chat-input-area {
  padding: 0.75rem 1rem;
  border-top: 1px solid rgba(229, 221, 207, 0.6);
  background: var(--white);
}

.quick-prompts {
  display: flex; flex-wrap: wrap; gap: 0.4rem;
  margin-bottom: 0.6rem;
}

.quick-prompt {
  font-size: 0.68rem;
  padding: 0.35rem 0.65rem;
  border: 1px dashed rgba(107, 91, 115, 0.4);
  border-radius: 999px;
  background: transparent;
  color: var(--stone);
  cursor: pointer;
  transition: all 0.15s var(--ease);
}

.quick-prompt:hover {
  border-style: solid;
  border-color: var(--territory);
  color: var(--territory);
  background: var(--territory-soft);
}

.input-row {
  display: flex; gap: 0.6rem; align-items: center;
}

.chat-input {
  flex: 1;
  padding: 0.7rem 1rem;
  font-size: 0.88rem;
  font-family: var(--font-body);
  border: 1px solid rgba(229, 221, 207, 0.8);
  border-radius: 12px;
  background: var(--cream);
  color: var(--earth);
  outline: none;
  transition: all 0.2s var(--ease);
}

.chat-input::placeholder { color: var(--stone); }

.chat-input:focus {
  border-color: var(--territory);
  box-shadow: 0 0 0 3px var(--territory-glow);
  background: var(--white);
}

.send-btn {
  padding: 0.7rem 1.1rem;
  font-size: 0.8rem; font-weight: 600;
  font-family: var(--font-body);
  background: linear-gradient(135deg, var(--territory), #047857);
  color: #fff;
  border: none;
  border-radius: 10px;
  cursor: pointer;
  display: flex; align-items: center; gap: 0.4rem;
  box-shadow: 0 4px 14px rgba(5, 150, 105, 0.3);
  transition: all 0.2s var(--ease);
}

.send-btn:hover {
  transform: translateY(-1px);
  box-shadow: 0 6px 20px rgba(5, 150, 105, 0.4);
}

.send-btn svg {
  width: 16px; height: 16px;
}

/* DESIGN NOTES PANEL */
.design-notes {
  margin-top: 2rem;
  padding: 1.5rem;
  background: var(--white);
  border: 2px dashed rgba(204, 119, 34, 0.4);
  border-radius: 14px;
}

.design-notes h2 {
  font-family: var(--font-display);
  font-size: 1.25rem;
  color: var(--ochre);
  margin-bottom: 0.75rem;
  display: flex; align-items: center; gap: 0.5rem;
}

.design-notes h2::before {
  content: 'ğŸ“‹';
}

.design-notes h3 {
  font-size: 0.85rem;
  color: var(--earth);
  margin: 1rem 0 0.4rem;
  padding-top: 0.75rem;
  border-top: 1px solid rgba(229, 221, 207, 0.6);
}

.design-notes h3:first-of-type {
  border-top: none;
  padding-top: 0;
  margin-top: 0.5rem;
}

.design-notes ul {
  margin-left: 1.2rem;
  font-size: 0.82rem;
  color: var(--charcoal);
}

.design-notes li {
  margin-bottom: 0.35rem;
  line-height: 1.5;
}

.design-notes code {
  font-size: 0.78rem;
  background: var(--cream);
  padding: 0.15rem 0.4rem;
  border-radius: 4px;
  color: var(--territory);
}

.design-notes .callout {
  background: var(--territory-soft);
  border-left: 3px solid var(--territory);
  padding: 0.75rem 1rem;
  margin: 0.75rem 0;
  border-radius: 0 8px 8px 0;
  font-size: 0.82rem;
}

/* FOOTER */
footer {
  background: var(--earth);
  color: #fdfaf5;
  padding: 1.4rem;
  text-align: center;
  margin-top: 2rem;
}

footer p { font-size: 0.85rem; margin-bottom: 0.15rem; }
footer .tagline { opacity: 0.8; font-size: 0.75rem; }
</style>
</head>

<body>

<nav>
  <a href="#" class="brand">
    Tribal Economic Impact Platform
    <span>Powered by TEIMâ„¢</span>
  </a>
  <div class="nav-links">
    <a href="#">Home</a>
    <a href="#">Model</a>
    <a href="#">Demo</a>
    <a href="#" class="active">Cedar</a>
    <a href="#">Contact</a>
  </div>
</nav>

<div class="page-wrap">
  
  <header class="page-header">
    <div class="page-title-block">
      <h1>Ask Cedar</h1>
      <p class="page-subtitle">
        Prototype of Francescaâ€™s chatbot deliverable â€” a TEIM-aware assistant that helps turn technical results into decisions, stories, and policy language.
      </p>
    </div>
    <div class="prototype-badge">Prototype Preview</div>
  </header>

  <div class="chat-container">
    
    <!-- Sidebar -->
    <aside class="sidebar">
      
      <div class="cedar-profile">
        <div class="cedar-avatar-row">
          <div class="cedar-avatar">CE</div>
          <div>
            <div class="cedar-name">Cedar</div>
            <div class="cedar-role">TEIM Guide</div>
          </div>
        </div>
        <p class="cedar-desc">
          Iâ€™m a practice tool, not a crystal ball. Ask me to unpack TEIM numbers, translate impact for council and community, or sketch the spine of a briefing or impact story.
        </p>
        <div class="cedar-badges">
          <span class="cedar-badge">TEIM-Powered</span>
          <span class="cedar-badge">Policy-Aware</span>
        </div>
      </div>

      <div class="topics-section">
        <p class="topics-label">Start with a topic</p>
        <div class="topic-cards">
          <div class="topic-card" data-topic="cedar_intro">
            <div class="topic-card-title">What is Cedar?</div>
            <div class="topic-card-sub">How to use this assistant in practice</div>
          </div>
          <div class="topic-card" data-topic="teim_intro">
            <div class="topic-card-title">What is TEIM?</div>
            <div class="topic-card-sub">Plain-language overview for tribal audiences</div>
          </div>
          <div class="topic-card" data-topic="multipliers">
            <div class="topic-card-title">Tribal-specific multipliers</div>
            <div class="topic-card-sub">Why we can't just copy IMPLAN</div>
          </div>
          <div class="topic-card" data-topic="council_briefing">
            <div class="topic-card-title">Briefing Tribal Council</div>
            <div class="topic-card-sub">Explain results in 10 minutes</div>
          </div>
          <div class="topic-card" data-topic="impact_story">
            <div class="topic-card-title">Impact story & report</div>
            <div class="topic-card-sub">Turn tables into a compelling narrative</div>
          </div>
          <div class="topic-card" data-topic="data_sources">
            <div class="topic-card-title">Data sovereignty</div>
            <div class="topic-card-sub">What goes in, what stays protected</div>
          </div>
          <div class="topic-card" data-topic="law_context">
            <div class="topic-card-title">Federal Indian law context</div>
            <div class="topic-card-sub">Sovereignty, jurisdiction, and data</div>
          </div>
        </div>
      </div>
    </aside>

    <!-- Chat Main Panel -->
    <main class="chat-main">
      
      <div class="chat-header">
        <div class="chat-header-left">
          <div class="chat-mode-indicator">Tribal Economic Impact</div>
          <span class="chat-session-label">Mockup Session Â· Front-end only</span>
        </div>
        <div class="chat-actions">
          <button class="chat-action-btn" id="exportBtn">Export</button>
          <button class="chat-action-btn" id="clearBtn">Clear</button>
        </div>
      </div>

      <div class="chat-body" id="chatBody">
        <div class="chat-intro" id="chatIntro">
          <div class="chat-intro-icon">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
            </svg>
          </div>
          <h3>Welcome to Cedar</h3>
          <p>
            Click a topic on the left, use a quick prompt below, or type your own question about TEIM, multipliers, report writing, or how to brief decision-makers.
          </p>
        </div>
      </div>

      <div class="chat-input-area">
        <div class="quick-prompts">
          <button class="quick-prompt" data-prompt="What is Cedar and how should I use this tool?">
            "What is Cedar?"
          </button>
          <button class="quick-prompt" data-prompt="Explain TEIM like I'm new to economic impact.">
            "Explain TEIM simply"
          </button>
          <button class="quick-prompt" data-prompt="How do I turn these TEIM results into a short impact story for council?">
            "Impact story from results"
          </button>
          <button class="quick-prompt" data-prompt="How do I explain this chart to elders and community, not just economists?">
            "How do I brief elders?"
          </button>
        </div>
        <div class="input-row">
          <input 
            type="text" 
            class="chat-input" 
            id="chatInput"
            placeholder="Ask about TEIM, multipliers, charts, impact stories, or how to talk to councilâ€¦ (Enter to send)"
          >
          <button class="send-btn" id="sendBtn">
            Send
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
              <path d="M22 2L11 13M22 2l-7 20-4-9-9-4 20-7z"/>
            </svg>
          </button>
        </div>
      </div>
    </main>
  </div>

  <section class="design-notes">
    <h2>Cedar Prototype â€” Francescaâ€™s Chatbot Deliverable</h2>
    
    <div class="callout">
      <strong>This is a front-end mockup only.</strong> The scripted responses show how conversations could flow. The real Python chatbot will eventually plug in where the JavaScript â€œanswer bankâ€ lives.
    </div>

    <h3>How This Maps to Your Deliverable</h3>
    <ul>
      <li>Topic-based organization (TEIM, Cedar, multipliers, impact story, data, law) mirrors how your back-end answer bank can be grouped.</li>
      <li>Keyword-based replies show how free-typed questions (e.g., â€œthis chart,â€ â€œimpact studyâ€) can still land in the right bucket.</li>
      <li>Cedar has a distinct voice: practical, policy-aware, and tuned for tribal leadership audiences.</li>
      <li>Export / Clear are UX anchors for â€œsave briefingâ€ and â€œresetâ€ behavior you can add later.</li>
    </ul>

    <h3>Quality-of-Life Features Shown</h3>
    <ul>
      <li><strong>Topic cards with hover states:</strong> small accent bar + motion so it feels like a real feature, not a mock.</li>
      <li><strong>Typing indicator:</strong> â€œCedar is thinkingâ€¦â€ makes the tool feel alive and gives space for back-end latency.</li>
      <li><strong>Message animations:</strong> subtle slide/fade so dense explanations donâ€™t feel like a wall of text.</li>
      <li><strong>Quick prompts:</strong> pre-written questions that model â€œgood asksâ€ for tribal policy work.</li>
      <li><strong>Print-based export:</strong> basic but real â€” a council staffer could literally print/save a draft briefing from this mockup.</li>
    </ul>

    <h3>Technical Notes</h3>
    <ul>
      <li><code>TOPIC_RESPONSES</code> = opinionated scripts for â€œcanonicalâ€ questions (cards, quick prompts).</li>
      <li><code>KEYWORD_RESPONSES</code> = shorter, more flexible replies that fire on free-typed text.</li>
      <li>When you build the Python version, these two layers can become JSON/YAML answer files + a small router.</li>
      <li>The UI doesnâ€™t care where responses come from â€” youâ€™ll just swap <code>getKeywordReply()</code> and topic handlers for API calls.</li>
    </ul>

    <h3>Your Chatbot Deliverable Checklist</h3>
    <ul>
      <li>â˜ Topic + keyword answer bank (TEIM, multipliers, law, data, impact stories, Cedar usage)</li>
      <li>â˜ Clear â€œvoiceâ€ for tribal leadership and policy audiences</li>
      <li>â˜ Lightweight run path (local Python, simple web backend, or both)</li>
      <li>â˜ Documentation so future staff can add new topics without touching Python logic</li>
    </ul>
  </section>

</div>

<footer>
  <p>Tribal Economic Impact Platform â€” Powered by TEIMâ„¢</p>
  <p class="tagline">Sovereignty-aware data and analysis for tribal nations</p>
</footer>

<script>
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// SCRIPTED RESPONSES
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const TOPIC_RESPONSES = {
  cedar_intro: {
    user: "What is Cedar and how should I use this tool?",
    bot: [
      `Iâ€™m Cedar â€” a TEIM-aware practice assistant. I donâ€™t replace your economists or legal counsel. I sit in the middle space: helping you turn technical work into language for council, community, and external partners.`,
      `You can use me to:\n\nâ€¢ Draft talking points for council or board briefings\nâ€¢ Translate a dense table into a short â€œso what?â€ paragraph\nâ€¢ Outline an economic impact memo or one-pager\nâ€¢ Sense-check whether youâ€™re explaining sovereignty and jurisdiction clearly without giving away sensitive internal data`,
      `The best way to use me is iterative: ask a question, skim what I give you, tweak it in your own voice, and then ask follow-up questions like â€œshorter,â€ â€œmore community-facing,â€ or â€œmore technical for finance.â€`
    ]
  },
  teim_intro: {
    user: "What is TEIM actually doing for our Nation?",
    bot: [
      `TEIM is a tribal-first economic impact system. Instead of forcing your Nation to fit state or county models, it builds around how you actually govern, spend, and circulate money.`,
      `When a councilmember asks â€œWhat does this number mean?â€ TEIM is meant to answer:\n\nâ€¢ How dollars move through tribal government, enterprises, and the community\nâ€¢ What jobs, wages, and business activity those dollars support\nâ€¢ How impact differs on tribal land versus surrounding areas`,
      `Think of it less as â€œmultipliers in a black boxâ€ and more as a structured way to tell a sovereignty-aware story of your economic footprint â€” one that respects jurisdiction, tribal programs, and community outcomes.`
    ]
  },
  multipliers: {
    user: "Why do we need tribal-specific multipliers instead of IMPLAN?",
    bot: [
      `Most off-the-shelf models assume state and county boundaries, not tribal jurisdiction. That means they often:\n\nâ€¢ Understate tribal enterprise impact\nâ€¢ Mis-assign jobs and income to counties instead of tribal land\nâ€¢ Miss flows between tribal government, enterprises, and households`,
      `Tribal-specific multipliers do three things differently:\n\n1. Treat the Tribe as a government with its own fiscal powers\n2. Use tribal data and economic zones instead of only county data\n3. Respect tribal boundaries and jurisdiction when tracking where impact lands`,
      `For a finance or policy audience, you can say: â€œIMPLAN is fine for state budgeting, but it wasnâ€™t built for sovereignty. TEIM is.â€`
    ]
  },
  council_briefing: {
    user: "How do I explain TEIM to Tribal Council in 10 minutes?",
    bot: [
      `You donâ€™t need to walk through the math. You need a frame that honors sovereignty and points to decisions. One simple structure:\n\n1. Purpose â€“ â€œThis tool shows our economic footprint as a sovereign Nation, not just a business.â€\n2. Use â€“ â€œIt helps us test scenarios: new projects, grants, debt, or policy changes.â€\n3. Example â€“ â€œIf we invest $X in this program, TEIM estimates Y jobs and Z in income on tribal land.â€`,
      `You can close with a simple contrast:\n\nâ€¢ Without TEIM: we rely on generic state/county models that misplace our impact.\nâ€¢ With TEIM: we use numbers that treat the Nation as the main unit of analysis.`,
      `If elders or community members are present, stay close to lived experience: â€œWhen we spend here, these are the jobs that show up in our community, these are the small businesses that feel it, and this is how it supports future generations.â€`
    ]
  },
  impact_story: {
    user: "How do I turn these TEIM results into a compelling economic impact story?",
    bot: [
      `A good impact story reads like a policy brief, not an accounting ledger. One template you can reuse:\n\n1. Headline â€“ One sentence about what changed (â€œTribal investment in X is supporting Y jobs and Z in income on tribal land.â€)\n2. Core numbers â€“ 3â€“5 numbers that matter (jobs, income, total output, share on tribal land, key sectors).\n3. Who feels it â€“ Elders, youth, workers, entrepreneurs, cultural programs.\n4. Sovereignty lens â€“ How this impact is different because the Nation governs these dollars.\n5. Call to action â€“ What decision or policy this analysis informs.`,
      `Example opening paragraph you can adapt:\n\nâ€œOur Nationâ€™s investment in health, education, and enterprise is doing more than balancing a budget line. According to TEIM, these investments support around 240 jobs, $11.2 million in labor income, and a broader ripple of business activity that stays anchored on tribal land. This story is about where those dollars go, who they reach, and what it means for our sovereignty.â€`,
      `From there, you can create two versions:\n\nâ€¢ A technical appendix for finance and policy staff.\nâ€¢ A plain-language one-pager or slide for council, elders, and partners.\n\nCedarâ€™s role is to help you move between those two levels without losing the core narrative.`
    ]
  },
  data_sources: {
    user: "What data goes into TEIM, and what stays sovereign?",
    bot: [
      `Inputs usually include a mix of:\n\nâ€¢ Tribal financial and enterprise data (under explicit data agreements)\nâ€¢ Public sources (e.g., tribal economic zones, BLS, Census, other benchmarks)\nâ€¢ Carefully selected external data for comparison, not replacement`,
      `The core principle is sovereignty over data:\n\nâ€¢ The Tribe decides what is shared outside the Nation\nâ€¢ Internal datasets stay under tribal control\nâ€¢ Public-facing results are designed to tell a strong story without exposing sensitive details`,
      `When talking to outside partners, you can say: â€œWe used our own tribal data to calibrate this model. External sources are there to support our story, not overwrite it.â€`
    ]
  },
  law_context: {
    user: "How does federal Indian law show up in this model?",
    bot: [
      `Federal Indian law and tribal law shape where the economy â€œcounts.â€ Jurisdiction affects:\n\nâ€¢ Which government can tax or regulate activity\nâ€¢ How trust land and fee land are treated\nâ€¢ How federal funding and program rules apply on the ground`,
      `TEIM doesnâ€™t try to be a full legal treatise, but it bakes law into the structure:\n\nâ€¢ Distinguishing tribal vs. state vs. federal roles\nâ€¢ Respecting trust vs. fee status when mapping impact\nâ€¢ Recognizing how sovereignty redirects economic flows and responsibilities`,
      `When explaining this to a policy audience, you might say: â€œThese numbers arenâ€™t floating in a vacuum. They sit inside a legal landscape where jurisdiction, land status, and sovereignty change how dollars move and who actually benefits.â€`
    ]
  }
};

// More flexible, personality-heavy keyword replies
const KEYWORD_RESPONSES = [
  {
    // multipliers & IMPLAN
    keywords: ["multiplier", "multipliers", "implan", "rims", "impact model"],
    reply: `Short version: multipliers tell you how one dollar ripples out. Tribal-specific multipliers ask, â€œHow does a dollar move through a sovereign Nation, not just a county?â€\n\nSo instead of treating you as a small part of a state economy, TEIM treats tribal government, enterprises, and households as one connected system â€” and measures the ripple from there.`
  },
  {
    // federal indian law & sovereignty
    keywords: ["federal", "indian law", "jurisdiction", "sovereign", "sovereignty", "pl 280", "treaty"],
    reply: `You can think of federal Indian law as the background operating system for the economy. It shapes who has power over land, taxation, and services. TEIM uses that context when deciding where to count jobs and income â€” on tribal land, in nearby counties, or in broader regional spillovers.\n\nWhen you write or brief, it helps to name that explicitly: â€œThese numbers are generated inside a legal landscape that recognizes our sovereignty and jurisdiction, not just our zip code.â€`
  },
  {
    // council, elders, briefings, charts
    keywords: ["council", "elders", "brief", "presentation", "slide", "chart", "graph"],
    reply: `With council and elders, you win by being concrete and respectful of time:\n\nâ€¢ Start with one sentence: what decision this supports.\nâ€¢ Show one chart or table, not ten.\nâ€¢ Translate each number into people or programs (â€œThis bar is payroll for our citizens, not just wages in the abstract.â€).\n\nIf a chart feels too technical, turn it into three bullets: what increased, what stayed flat, and what it means for community.`
  },
  {
    // data, confidentiality, sovereignty
    keywords: ["data", "sources", "confidential", "privacy", "sensitive", "sharing"],
    reply: `Most of the heavy lifting comes from tribal data, and that stays under tribal control. Public data is used as a scaffold â€” it helps fill gaps and create comparisons, but it doesnâ€™t replace what the Nation knows about itself.\n\nIn practice, that means two layers: an internal view with detail for staff, and a public-facing view thatâ€™s more aggregated and protective. TEIM is designed to support that split.`
  },
  {
    // Cedar identity
    keywords: ["cedar", "who are you", "what are you"],
    reply: `Iâ€™m Cedar â€” imagine a policy-minded program officer sitting next to your economist, helping translate their work for council, funders, and partners.\n\nIâ€™m not making up numbers; Iâ€™m helping you:\nâ€¢ Frame questions\nâ€¢ Draft impact language\nâ€¢ Connect TEIM outputs to decisions and narrative.`
  },
  {
    // TEIM & impact study / report writing
    keywords: ["impact study", "impact report", "executive summary", "write", "writing", "story"],
    reply: `A good impact study does three jobs at once:\n\n1. Gives decision-makers confidence in the numbers.\n2. Tells a clear story about jobs, income, and community outcomes.\n3. Honors sovereignty and data stewardship.\n\nStructure you can reuse:\nâ€¢ 1â€“2 page executive summary (for council and partners)\nâ€¢ Methods and data section (for staff and reviewers)\nâ€¢ Results organized by theme (jobs, income, sector, geography)\nâ€¢ Short conclusion: â€œWhat this suggests for our next decision.â€`
  },
  {
    // jobs, wages, sectors
    keywords: ["jobs", "employment", "wages", "income", "sectors", "industries"],
    reply: `When you talk about jobs and income, connect them back to role and place:\n\nâ€¢ Where are these jobs (on tribal land, off-reservation, hybrid)?\nâ€¢ Who holds them (citizens, non-citizens, partner organizations)?\nâ€¢ What do these wages enable (housing stability, local spending, cultural work)?\n\nThatâ€™s how a table turns into a policy-relevant story instead of just a list of numbers.`
  }
];

const DEFAULT_FALLBACK =
  `Iâ€™ll treat this as a design prompt: in the real version, this would route to a TEIM-aware answer bank or a more specific topic. Try asking about TEIM, Cedar, multipliers, impact stories, or how to brief council and elders.`;

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// DOM ELEMENTS
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const chatBody = document.getElementById('chatBody');
const chatInput = document.getElementById('chatInput');
const sendBtn = document.getElementById('sendBtn');
const chatIntro = document.getElementById('chatIntro');
const clearBtn = document.getElementById('clearBtn');
const exportBtn = document.getElementById('exportBtn');

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// HELPERS
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function showIntro() {
  if (chatIntro && !chatBody.contains(chatIntro)) {
    chatBody.innerHTML = '';
    chatIntro.style.display = 'block';
    chatBody.appendChild(chatIntro);
  } else if (chatIntro) {
    chatIntro.style.display = 'block';
  }
}

function hideIntro() {
  if (chatIntro) chatIntro.style.display = 'none';
}

function getTimestamp() {
  return new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
}

function appendMessage(sender, text) {
  hideIntro();
  const row = document.createElement('div');
  row.className = `message-row ${sender}`;

  const avatar = document.createElement('div');
  avatar.className = 'message-avatar';
  avatar.textContent = sender === 'bot' ? 'CE' : 'You';

  const content = document.createElement('div');
  content.className = 'message-content';

  const bubble = document.createElement('div');
  bubble.className = 'message-bubble';
  bubble.textContent = text;

  const meta = document.createElement('div');
  meta.className = 'message-meta';
  meta.textContent = sender === 'bot' ? `Cedar Â· ${getTimestamp()}` : getTimestamp();

  content.appendChild(bubble);
  content.appendChild(meta);
  row.appendChild(avatar);
  row.appendChild(content);
  chatBody.appendChild(row);
  chatBody.scrollTop = chatBody.scrollHeight;
}

function showTyping() {
  hideIntro();
  const row = document.createElement('div');
  row.className = 'message-row bot';
  row.id = 'typingRow';

  const avatar = document.createElement('div');
  avatar.className = 'message-avatar';
  avatar.textContent = 'CE';

  const indicator = document.createElement('div');
  indicator.className = 'typing-indicator';
  indicator.innerHTML = `
    <div class="typing-dots"><span></span><span></span><span></span></div>
    <span class="typing-text">Cedar is thinkingâ€¦</span>
  `;

  row.appendChild(avatar);
  row.appendChild(indicator);
  chatBody.appendChild(row);
  chatBody.scrollTop = chatBody.scrollHeight;
}

function hideTyping() {
  const typingRow = document.getElementById('typingRow');
  if (typingRow) typingRow.remove();
}

function appendBotParagraphs(paragraphs) {
  let delay = 0;
  paragraphs.forEach((p, i) => {
    setTimeout(() => {
      if (i === 0) hideTyping();
      appendMessage('bot', p);
    }, delay);
    delay += 650;
  });
}

function getKeywordReply(text) {
  const lower = text.toLowerCase();
  for (const block of KEYWORD_RESPONSES) {
    if (block.keywords.some(k => lower.includes(k))) {
      return block.reply;
    }
  }
  return DEFAULT_FALLBACK;
}

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// HANDLERS
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function handleTopicClick(topicKey) {
  const topic = TOPIC_RESPONSES[topicKey];
  if (!topic) return;
  appendMessage('user', topic.user);
  showTyping();
  setTimeout(() => {
    appendBotParagraphs(topic.bot);
  }, 700);
}

function handleSend() {
  const text = chatInput.value.trim();
  if (!text) return;
  appendMessage('user', text);
  chatInput.value = '';
  showTyping();
  setTimeout(() => {
    hideTyping();
    const reply = getKeywordReply(text);
    appendMessage('bot', reply);
  }, 900);
}

function handleClear() {
  chatBody.innerHTML = '';
  showIntro();
}

function handleExport() {
  // simple print-to-PDF placeholder
  window.print();
}

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// EVENT LISTENERS
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
sendBtn.addEventListener('click', handleSend);

chatInput.addEventListener('keydown', e => {
  if (e.key === 'Enter' && !e.shiftKey) {
    e.preventDefault();
    handleSend();
  }
});

document.querySelectorAll('.topic-card').forEach(card => {
  card.addEventListener('click', () => {
    const topicKey = card.getAttribute('data-topic');
    handleTopicClick(topicKey);
  });
});

document.querySelectorAll('.quick-prompt').forEach(btn => {
  btn.addEventListener('click', () => {
    const prompt = btn.getAttribute('data-prompt');
    if (prompt) {
      chatInput.value = prompt;
      handleSend();
    }
  });
});

if (clearBtn) clearBtn.addEventListener('click', handleClear);
if (exportBtn) exportBtn.addEventListener('click', handleExport);
</script>

</body>
</html>
